import { Meta, Canvas, Story } from '@storybook/addon-docs';

import { ThemedContainer } from '../../helpers';
import HierarchyBrowser from './HierarchyBrowser';
import { SortIcon } from '../../icons/Sort';

<Meta title='Components/Hierarchy/Browser' parameters={{ options: { showToolbar: true } }} />

export const Template = (args) => (
	<ThemedContainer theme='light'>
		<HierarchyBrowser {...args} />
	</ThemedContainer>
);

# Hierarchy Browser

A versatile component designed to display hierarchical data structures in a browser-like interface within React applications. The component allows users to interact with and navigate through hierarchical items.

#### Design - [Figma](https://www.figma.com/file/e9opoAtQHBo4vFd6u0Co98/Component-Library?type=design&node-id=943-47941&mode=design&t=glo0ufmkJup9qJbN-0) | Code - [Github](https://github.com/banyandata-cloud/roots/tree/main/components/hierarchy/browser)

> The HierarchyBrowser component renders a browser-like interface for hierarchical data. It accepts metadata that defines the hierarchy structure. Each item in the hierarchy can have a title, ID, count, and list of child items.

## Usage

Basic import and additional information on how to use this component.

```js
import { HierarchyBrowser } from '@banyan_cloud/roots';
```

- This HierarchyBrowser component provides an organized and interactive way to display and navigate through hierarchical data structures, enhancing the user experience and aiding in data exploration within your React application.

## Stories

The CSF rendered inside the `Canvas` from which you can see the implementation example.

### Default Hierarchy Browser

The default Hierarchy Browser.

<Canvas>
	<Story
		name='Default Hierarchy Browser'
		args={{
			setItemProps: (data) => {
				const itemProps = {};
				itemProps.rightComponent = data.count;
				itemProps.leftComponent = <SortIcon />;
				itemProps.title = data.title;
				itemProps.count = data.count;
				return itemProps;
			},
			metadata: [
				{
					count: 5,
					id: 'databaseList',
					list: [
						{
							count: 1,
							id: 'database',
							list: [
								{
									count: 1,
									id: 'schemasList',
									list: [
										{
											id: 'schema',
											list: [
												{
													count: 11,
													id: 'object_type',
													list: [
														{
															_id: '1aec8ff8-e669-4cf7-b8dd-8c98290a7926',
															id: 'object',
															list: [
																{
																	count: 0,
																	id: 'object_type',
																	list: [
																		{
																			_id: '2cb44ca5-d678-485b-898b-79f786f78686',
																			id: 'object',
																			title: 'tableoid',
																		},
																		{
																			_id: '2cb44ca5-d678-485b-898b-79f786f78686',
																			id: 'object',
																			title: 'cmax',
																		},
																		{
																			_id: '2cb44ca5-d678-485b-898b-79f786f78686',
																			id: 'object',
																			title: 'xmax',
																		},
																		{
																			_id: '2cb44ca5-d678-485b-898b-79f786f78686',
																			id: 'object',
																			title: 'cmin',
																		},
																		{
																			_id: '2cb44ca5-d678-485b-898b-79f786f78686',
																			id: 'object',
																			title: 'xmin',
																		},
																		{
																			_id: '2cb44ca5-d678-485b-898b-79f786f78686',
																			id: 'object',
																			title: 'ctid',
																		},
																		{
																			_id: '2cb44ca5-d678-485b-898b-79f786f78686',
																			id: 'object',
																			title: 'id',
																		},
																		{
																			_id: '2cb44ca5-d678-485b-898b-79f786f78686',
																			id: 'object',
																			title: 'name',
																		},
																	],
																	title: 'Columns',
																},
																{
																	count: 0,
																	id: 'object_type',
																	list: true,
																	title: 'Indexes',
																},
																{
																	count: 0,
																	id: 'object_type',
																	list: true,
																	title: 'Constraints',
																},
																{
																	count: 0,
																	id: 'object_type',
																	list: true,
																	title: 'Triggers',
																},
															],
															title: 'api_sample_table',
														},
														{
															_id: 'a9976543-f462-47bf-94aa-20b585ca658a',
															id: 'object',
															list: [
																{
																	count: 0,
																	id: 'object_type',
																	list: [
																		{
																			_id: '62ce8705-9c60-4409-8dbf-ece23d305efc',
																			id: 'object',
																			title: 'tableoid',
																		},
																		{
																			_id: '62ce8705-9c60-4409-8dbf-ece23d305efc',
																			id: 'object',
																			title: 'cmax',
																		},
																		{
																			_id: '62ce8705-9c60-4409-8dbf-ece23d305efc',
																			id: 'object',
																			title: 'xmax',
																		},
																		{
																			_id: '62ce8705-9c60-4409-8dbf-ece23d305efc',
																			id: 'object',
																			title: 'cmin',
																		},
																		{
																			_id: '62ce8705-9c60-4409-8dbf-ece23d305efc',
																			id: 'object',
																			title: 'xmin',
																		},
																		{
																			_id: '62ce8705-9c60-4409-8dbf-ece23d305efc',
																			id: 'object',
																			title: 'ctid',
																		},
																		{
																			_id: '62ce8705-9c60-4409-8dbf-ece23d305efc',
																			id: 'object',
																			title: 'id',
																		},
																		{
																			_id: '62ce8705-9c60-4409-8dbf-ece23d305efc',
																			id: 'object',
																			title: 'name',
																		},
																	],
																	title: 'Columns',
																},
																{
																	count: 0,
																	id: 'object_type',
																	list: true,
																	title: 'Indexes',
																},
																{
																	count: 0,
																	id: 'object_type',
																	list: true,
																	title: 'Constraints',
																},
																{
																	count: 0,
																	id: 'object_type',
																	list: true,
																	title: 'Triggers',
																},
															],
															title: 'chethan_sample_table',
														},
														{
															_id: '96b97a74-d702-49b1-85b8-b5f82bbd1bb2',
															id: 'object',
															list: true,
															title: 'recs_aws_account_details',
														},
														{
															_id: '256698e2-1c64-423e-a3ac-be5b384af2cf',
															id: 'object',
															list: true,
															title: 'recs_aws_ec2_instance_details',
														},
														{
															_id: 'e56476c2-152c-462f-8c7e-90df5d23eba8',
															id: 'object',
															list: true,
															title: 'sahil_tab',
														},
														{
															_id: '4cbe5214-5dba-4359-9512-1581aae45913',
															id: 'object',
															list: true,
															title: 'tettbl',
														},
														{
															_id: 'cba7b745-52dd-496a-875c-7cc04ba33e79',
															id: 'object',
															list: true,
															title: 'vin_tab',
														},
														{
															_id: '1d54270a-6c11-4b76-8888-e53bc2655c67',
															id: 'object',
															list: true,
															title: 'vin_tab1',
														},
														{
															_id: '0ed759a4-fdd8-426e-8689-6b06e6a8936b',
															id: 'object',
															list: true,
															title: 'vin_tab2',
														},
														{
															_id: '8d2b71cf-64c5-4806-834e-9013852d8c3a',
															id: 'object',
															list: true,
															title: 'vin_tab3',
														},
														{
															_id: 'a32822b2-8a6b-46ab-bc5e-dae8bfc62cf5',
															id: 'object',
															list: [
																{
																	count: 0,
																	id: 'object_type',
																	list: true,
																	title: 'Columns',
																},
																{
																	count: 0,
																	id: 'object_type',
																	list: true,
																	title: 'Indexes',
																},
																{
																	count: 0,
																	id: 'object_type',
																	list: true,
																	title: 'Constraints',
																},
																{
																	count: 0,
																	id: 'object_type',
																	list: true,
																	title: 'Triggers',
																},
															],
															title: 'whole_api_test',
														},
													],
													title: 'Tables',
												},
											],
											title: 'public',
										},
									],
									title: 'Schemas',
								},
							],
							title: 'APITST',
						},
						{
							count: 1,
							id: 'database',
							list: [
								{
									count: 28,
									id: 'schemasList',
									list: [
										{
											id: 'schema',
											list: [
												{
													count: 1,
													id: 'object_type',
													list: true,
													title: 'Procedures',
												},
												{
													count: 24,
													id: 'object_type',
													list: true,
													title: 'Tables',
												},
											],
											title: 'auth_schema',
										},
										{
											id: 'schema',
											list: [
												{
													count: 1,
													id: 'object_type',
													list: true,
													title: 'Procedures',
												},
												{
													count: 12,
													id: 'object_type',
													list: true,
													title: 'Tables',
												},
											],
											title: 'awscol_schema',
										},
										{
											id: 'schema',
											list: [
												{
													count: 1,
													id: 'object_type',
													list: true,
													title: 'Procedures',
												},
											],
											title: 'azucol_schema',
										},
										{
											id: 'schema',
											list: [
												{
													count: 1,
													id: 'object_type',
													list: true,
													title: 'Procedures',
												},
												{
													count: 28,
													id: 'object_type',
													list: true,
													title: 'Tables',
												},
											],
											title: 'bc_auth',
										},
										{
											id: 'schema',
											list: [
												{
													count: 22,
													id: 'object_type',
													list: true,
													title: 'Procedures',
												},
											],
											title: 'bds_pub_schema',
										},
										{
											id: 'schema',
											list: [
												{
													count: 1,
													id: 'object_type',
													list: true,
													title: 'Procedures',
												},
												{
													count: 6,
													id: 'object_type',
													list: true,
													title: 'Tables',
												},
											],
											title: 'dtcscol_mssql_schema',
										},
										{
											id: 'schema',
											list: [
												{
													count: 1,
													id: 'object_type',
													list: true,
													title: 'Procedures',
												},
												{
													count: 12,
													id: 'object_type',
													list: true,
													title: 'Tables',
												},
											],
											title: 'dtcscol_mysql_schema',
										},
										{
											id: 'schema',
											list: [
												{
													count: 1,
													id: 'object_type',
													list: true,
													title: 'Procedures',
												},
												{
													count: 12,
													id: 'object_type',
													list: true,
													title: 'Tables',
												},
											],
											title: 'dtcscol_oracle_schema',
										},
										{
											id: 'schema',
											list: [
												{
													count: 1,
													id: 'object_type',
													list: true,
													title: 'Procedures',
												},
												{
													count: 13,
													id: 'object_type',
													list: true,
													title: 'Tables',
												},
											],
											title: 'dtcscol_pgsql_schema',
										},
										{
											id: 'schema',
											list: [
												{
													count: 1,
													id: 'object_type',
													list: true,
													title: 'Procedures',
												},
												{
													count: 35,
													id: 'object_type',
													list: true,
													title: 'Tables',
												},
											],
											title: 'dtcs_mssql_schema',
										},
										{
											id: 'schema',
											list: [
												{
													count: 3,
													id: 'object_type',
													list: true,
													title: 'Procedures',
												},
												{
													count: 2,
													id: 'object_type',
													list: true,
													title: 'Sequences',
												},
												{
													count: 61,
													id: 'object_type',
													list: true,
													title: 'Tables',
												},
											],
											title: 'dtcs_mysql_schema',
										},
										{
											id: 'schema',
											list: [
												{
													count: 3,
													id: 'object_type',
													list: true,
													title: 'Procedures',
												},
												{
													count: 2,
													id: 'object_type',
													list: true,
													title: 'Sequences',
												},
												{
													count: 99,
													id: 'object_type',
													list: true,
													title: 'Tables',
												},
											],
											title: 'dtcs_oracle_schema',
										},
										{
											id: 'schema',
											list: [
												{
													count: 4,
													id: 'object_type',
													list: true,
													title: 'Procedures',
												},
												{
													count: 2,
													id: 'object_type',
													list: true,
													title: 'Sequences',
												},
												{
													count: 71,
													id: 'object_type',
													list: true,
													title: 'Tables',
												},
											],
											title: 'dtcs_pgsql_schema',
										},
										{
											id: 'schema',
											list: [
												{
													count: 1,
													id: 'object_type',
													list: true,
													title: 'Procedures',
												},
												{
													count: 1,
													id: 'object_type',
													list: true,
													title: 'Sequences',
												},
												{
													count: 12,
													id: 'object_type',
													list: true,
													title: 'Tables',
												},
											],
											title: 'gcpcol_schema',
										},
										{
											id: 'schema',
											list: [
												{
													count: 1,
													id: 'object_type',
													list: true,
													title: 'Procedures',
												},
												{
													count: 16,
													id: 'object_type',
													list: true,
													title: 'Tables',
												},
											],
											title: 'iam_schema',
										},
										{
											id: 'schema',
											list: [
												{
													count: 1,
													id: 'object_type',
													list: true,
													title: 'Procedures',
												},
												{
													count: 15,
													id: 'object_type',
													list: true,
													title: 'Tables',
												},
											],
											title: 'ims_schema',
										},
										{
											id: 'schema',
											list: [
												{
													count: 1,
													id: 'object_type',
													list: true,
													title: 'Procedures',
												},
												{
													count: 11,
													id: 'object_type',
													list: true,
													title: 'Tables',
												},
											],
											title: 'lmos_schema',
										},
										{
											id: 'schema',
											list: [
												{
													count: 1,
													id: 'object_type',
													list: true,
													title: 'Procedures',
												},
												{
													count: 3,
													id: 'object_type',
													list: true,
													title: 'Sequences',
												},
												{
													count: 8,
													id: 'object_type',
													list: true,
													title: 'Tables',
												},
											],
											title: 'public',
										},
										{
											id: 'schema',
											list: [
												{
													count: 2,
													id: 'object_type',
													list: true,
													title: 'Procedures',
												},
												{
													count: 35,
													id: 'object_type',
													list: true,
													title: 'Sequences',
												},
												{
													count: 83,
													id: 'object_type',
													list: true,
													title: 'Tables',
												},
											],
											title: 'recs_aws_schema',
										},
										{
											id: 'schema',
											list: [
												{
													count: 1,
													id: 'object_type',
													list: true,
													title: 'Procedures',
												},
											],
											title: 'recs_azu_schema',
										},
										{
											id: 'schema',
											list: [
												{
													count: 2,
													id: 'object_type',
													list: true,
													title: 'Procedures',
												},
												{
													count: 35,
													id: 'object_type',
													list: true,
													title: 'Sequences',
												},
												{
													count: 33,
													id: 'object_type',
													list: true,
													title: 'Tables',
												},
											],
											title: 'recs_doc_schema',
										},
										{
											id: 'schema',
											list: [
												{
													count: 2,
													id: 'object_type',
													list: true,
													title: 'Procedures',
												},
												{
													count: 35,
													id: 'object_type',
													list: true,
													title: 'Sequences',
												},
												{
													count: 68,
													id: 'object_type',
													list: true,
													title: 'Tables',
												},
											],
											title: 'recs_gcp_schema',
										},
										{
											id: 'schema',
											list: [
												{
													count: 2,
													id: 'object_type',
													list: true,
													title: 'Procedures',
												},
												{
													count: 35,
													id: 'object_type',
													list: true,
													title: 'Sequences',
												},
												{
													count: 74,
													id: 'object_type',
													list: true,
													title: 'Tables',
												},
											],
											title: 'recs_oci_schema',
										},
										{
											id: 'schema',
											list: [
												{
													count: 1,
													id: 'object_type',
													list: true,
													title: 'Procedures',
												},
												{
													count: 18,
													id: 'object_type',
													list: true,
													title: 'Sequences',
												},
												{
													count: 26,
													id: 'object_type',
													list: true,
													title: 'Tables',
												},
											],
											title: 'sc_auth_schema',
										},
										{
											id: 'schema',
											list: [
												{
													count: 1,
													id: 'object_type',
													list: true,
													title: 'Procedures',
												},
												{
													count: 43,
													id: 'object_type',
													list: true,
													title: 'Sequences',
												},
												{
													count: 87,
													id: 'object_type',
													list: true,
													title: 'Tables',
												},
											],
											title: 'sc_ecs_schema',
										},
										{
											id: 'schema',
											list: [
												{
													count: 1,
													id: 'object_type',
													list: true,
													title: 'Procedures',
												},
												{
													count: 159,
													id: 'object_type',
													list: true,
													title: 'Tables',
												},
												{
													count: 1,
													id: 'object_type',
													list: true,
													title: 'Views',
												},
											],
											title: 'scos_schema',
										},
										{
											id: 'schema',
											list: [
												{
													count: 10,
													id: 'object_type',
													list: true,
													title: 'Tables',
												},
											],
											title: 'doccol_schema',
										},
										{
											id: 'schema',
											list: [
												{
													count: 11,
													id: 'object_type',
													list: true,
													title: 'Tables',
												},
											],
											title: 'ocicol_schema',
										},
									],
									title: 'Schemas',
								},
							],
							title: 'bdopcfl',
						},
						{
							count: 1,
							id: 'database',
							list: [
								{
									count: 2,
									id: 'schemasList',
									list: [
										{
											id: 'schema',
											list: [
												{
													count: 2,
													id: 'object_type',
													list: [
														{
															_id: '632ea6ae-b823-4c5c-8952-6bcfa6ed7879',
															id: 'object',
															list: [],
															title: 'auditlogfunc10',
														},
														{
															_id: '99841bdd-dbdd-41c2-a8de-061720e7cf32',
															id: 'object',
															list: [],
															title: 'transfer',
														},
													],
													title: 'Procedures',
												},
												{
													count: 2,
													id: 'object_type',
													list: true,
													title: 'Sequences',
												},
												{
													count: 4,
													id: 'object_type',
													list: true,
													title: 'Tables',
												},
												{
													count: 1,
													id: 'object_type',
													list: true,
													title: 'Views',
												},
											],
											title: 'sc_ecs_schema',
										},
										{
											id: 'schema',
											list: [
												{
													count: 10,
													id: 'object_type',
													list: true,
													title: 'Tables',
												},
											],
											title: 'public',
										},
									],
									title: 'Schemas',
								},
							],
							title: 'postgres',
						},
						{
							count: 1,
							id: 'database',
							list: [
								{
									count: 0,
									id: 'schemasList',
									list: [],
									title: 'Schemas',
								},
							],
							title: 'rdsadmin',
						},
						{
							count: 1,
							id: 'database',
							list: [
								{
									count: 0,
									id: 'schemasList',
									list: [],
									title: 'Schemas',
								},
							],
							title: 'repmgr',
						},
					],
					title: 'Database',
				},
			],
		}}>
		{Template.bind({})}
	</Story>
</Canvas>

## API

**`className`**

Additional CSS class names to be applied to the HierarchyBrowser component.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>String</td>
		<td>""</td>
	</tr>
</table>

```jsx
<HierarchyBrowser className='additionalClass' />
```

**`metadata`**

Hierarchical data to be displayed with properties title, id, count, and list.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>{`{
		title: string,
		id: string,
		count: number,
		list: array,
	}`}</td>
		<td>{`{}`}</td>
	</tr>
</table>

```jsx
<HierarchyBrowser metadata={
	title: 'database',
	id: 'database',
	count: 2,
	list: [
		{
			title: 'test1',
			id: 'schema',
			count: 2,
		}
	]
} />
```

**`onItemClick`**

Callback function triggered when a hierarchy item is clicked.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>Function</td>
		<td>{`() => {}`}</td>
	</tr>
</table>

```jsx
<HierarchyBrowser
	onItemClick={() => {
		console.log('Button clicked');
	}}
/>
```

**`onItemDoubleClick`**

Callback function triggered when a hierarchy item is double-clicked.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>Function</td>
		<td>{`() => {}`}</td>
	</tr>
</table>

```jsx
<HierarchyBrowser
	onItemDoubleClick={() => {
		console.log('Button clicked');
	}}
/>
```

**`borderSize`**

The size of the border of the hierarchy browser.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>Number</td>
		<td>4</td>
	</tr>
</table>

```jsx
<HierarchyBrowser borderSize={2} />
```

**`minWidth`**

The size of the border of the hierarchy browser.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>Number</td>
		<td>220</td>
	</tr>
</table>

```jsx
<HierarchyBrowser minWidth={100} />
```

**`maxWidth`**

The maximum width of the hierarchy browser.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>Number</td>
		<td>null</td>
	</tr>
</table>

```jsx
<HierarchyBrowser maxWidth={400} />
```

**`resizable`**

If true, the hierarchy browser can be resized.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>Boolean</td>
		<td>false</td>
	</tr>
</table>

```jsx
<HierarchyBrowser resizable={true} />
```

**`setItemProps`**

A function that returns additional props for hierarchy items.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>Function</td>
		<td>{`() => { return {} }`}</td>
	</tr>
</table>

```jsx
<HierarchyBrowser
	setItemProps={(items) => {
		return { items };
	}}
/>
```

**`title`**

The title of the hierarchy browser.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>String</td>
		<td>"Browser"</td>
	</tr>
</table>

```jsx
<HierarchyBrowser title='Browser' />
```
