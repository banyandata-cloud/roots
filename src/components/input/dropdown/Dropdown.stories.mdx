import { Meta, Canvas, Story } from '@storybook/addon-docs';

import { useState } from 'react';
import { ThemedContainer } from '../../helpers';
import Dropdownv2 from './Dropdown';
import DropdownItemv2 from './dropdown-item/DropdownItem';

<Meta title='Components/Input/Dropdown' parameters={{ options: { showToolbar: true } }} />

export const Template = (args) => (
	<ThemedContainer theme='light'>
		<Dropdownv2 {...args}>
			<DropdownItemv2 title='Option A' value={1} />
			<DropdownItemv2 title='Option B' value={2} />
			<DropdownItemv2 title='Option C' value={3} />
		</Dropdownv2>
	</ThemedContainer>
);

# Dropdown

The Dropdown component provides a versatile dropdown input with support for single and multi-selection. It supports controlled and uncontrolled usage and offers various customization options.

#### Design - [Figma](https://www.figma.com/file/e9opoAtQHBo4vFd6u0Co98/Component-Library?node-id=1%3A6&mode=dev) | Code - [Github](https://github.com/banyandata-cloud/roots/tree/main/components/input/dropdown)

> The Dropdown component offers a flexible and customizable way to include dropdown inputs in your application. It supports both single and multi-selection modes and can be controlled or uncontrolled based on your needs.

## Usage

Basic import and additional information on how to use this component.

```js
import { Dropdown } from '@banyan_cloud/roots';
```

- The multi prop enables multi-selection mode, allowing users to select multiple options.
- The onChange function is called when the selection changes. It provides the new selected value(s) as a parameter.
- The formatter function allows you to customize how the selected option count is displayed in multi-selection mode.

## Stories

The CSF rendered inside the `Canvas` from which you can see the implementation example.

### Default - Uncontrolled

The default dropdown component.

<Canvas>
	<Story
		name='Default Uncontrolled'
		args={{
			label: 'Default Dropdown',
			placeholder: 'Select an option',
		}}>
		{Template.bind({})}
	</Story>
</Canvas>

### Default Dropdown - Controlled

The dropdown component with radio buttons.

<Canvas>
	<Story name='Default Controlled'>
		{() => {
			const [value, setValue] = useState([]);
			return (
				<div>
					<Dropdownv2
						value={value}
						highlightOnSelect
						label='Default Dropdown With States'
						onChange={(event, newValue) => {
							setValue(newValue);
						}}
						placeholder='Select an option'>
						<DropdownItemv2 title='Option A' value={1} />
						<DropdownItemv2 title='Option B' value={2} />
						<DropdownItemv2 title='Option C' value={3} />
					</Dropdownv2>
				</div>
			);
		}}
	</Story>
</Canvas>

### Multi Select Dropdown - Controlled

The dropdown component with multiple selections.

<Canvas>
	<Story name='Multi Select Controlled'>
		{() => {
			const [value, setValue] = useState('');
			console.log(value);
			return (
				<div>
					<Dropdownv2
						value={value?.split(',')}
						multi={true}
						label='Multi Select Checkbox Dropdown'
						placeholder='Select an option'
						onChange={(event, newValue) => {
							setValue(newValue.toString());
						}}>
						{[...Array(50).keys()].map((option) => {
							return (
								<DropdownItemv2
									key={option}
									title={`Option ${option + 1}`}
									value={option + 1}
									variant='checkbox'
								/>
							);
						})}
					</Dropdownv2>
				</div>
			);
		}}
	</Story>
</Canvas>

### Multi Select Dropdown - Unontrolled

The dropdown component with multiple selections.

<Canvas>
	<Story name='Multi Select Uncontrolled'>
		{() => {
			return (
				<div>
					<Dropdownv2
						multi={true}
						label='Uncontrolled Multi Select Checkbox Dropdown'
						placeholder='Select an option'>
						{[...Array(20).keys()].map((option) => {
							return (
								<DropdownItemv2
									key={option}
									title={`Option ${option + 1}`}
									value={option + 1}
									variant='checkbox'
								/>
							);
						})}
					</Dropdownv2>
				</div>
			);
		}}
	</Story>
</Canvas>

## API

**`popperClassName`**

Class name to be applied to the Popper component.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>String</td>
		<td>""</td>
	</tr>
</table>

```jsx
<Dropdown popperClassName='PopperClass' />
```

**`className`**

Class name to be applied to the root element.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>String</td>
		<td>""</td>
	</tr>
</table>

```jsx
<Dropdown className='additionalClass' />
```

**`disabled`**

Disables the dropdown input.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>Boolean</td>
		<td>false</td>
	</tr>
</table>

```jsx
<Dropdown disabled={true} />
```

**`label`**

Text label associated with the dropdown.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>String</td>
		<td>null</td>
	</tr>
</table>

```jsx
<Dropdown label='Label' />
```

**`value`**

Selected value(s) for controlled usage.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>String | Array of strings</td>
		<td>undefined</td>
	</tr>
</table>

```jsx
<Dropdown value={['value1', 'value2']} />
```

**`placeholder`**

Placeholder text to display when no option is selected.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>String</td>
		<td>'Select an option'</td>
	</tr>
</table>

```jsx
<Dropdown placeholder='Select' />
```

**`multi`**

Enables multi-selection mode.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>Boolean</td>
		<td>false</td>
	</tr>
</table>

```jsx
<Dropdown multi={true} />
```

**`onChange`**

Function to execute when the selection changes.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>Function</td>
		<td>null</td>
	</tr>
</table>

```jsx
<Dropdown
	onChange={() => {
		console.log('On change');
	}}
/>
```

**`onBlur`**

Function to execute when the dropdown input loses focus.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>Function</td>
		<td>null</td>
	</tr>
</table>

```jsx
<Dropdown
	onChange={() => {
		console.log('On blur');
	}}
/>
```

**`feedback`**

Function to execute when the dropdown input loses focus.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>Object</td>
		<td>null</td>
	</tr>
</table>

```jsx
<Dropdown
	feedback={{
		text: Successful,
		type: 'success',
	}}
/>
```

**`formatter`**

Function to format the selected option count in multi-selection mode.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>Function</td>
		<td>
			{`(totalSelected) => {
		return '{totalSelected} options selected';
		}`}
		</td>
	</tr>
</table>

```jsx
<Dropdown
	formatter={(totalSelected) => {
		return `${totalSelected} options selected`;
	}}
/>
```
