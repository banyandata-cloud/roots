import { Meta, Canvas, Story } from '@storybook/addon-docs';

import CodeSnippet from './CodeSnippet';

<Meta
	title='Components/CodeSnippet'
	parameters={{
		options: {
			showToolbar: false,
		},
	}}
	r
/>

export const Template = (args) => <CodeSnippet {...args} />;

# Code Snippet

A container to display the block of `code` of any langauge. It acts as the medium to show the code block or particulat syntax to represent the source code or an example snippet with an option to `copy`.

#### Design - [Figma](https://www.figma.com/file/e9opoAtQHBo4vFd6u0Co98/Component-Library?type=design&node-id=943-47942&mode=design&t=Afx8B20v4RpJy0j6-0) | Code - [Github](https://github.com/banyandata-cloud/roots/tree/main/components/codeSnippet)

> This components uses the `react-syntax-highlighter` library to highlight the syntax.

## Usage

Basic import and additional information on how to use this component.

```js
import { CodeSnippet } from '@banyan_cloud/roots';
```

-   It is recommended to use the formatted stringified code to use as the snippet

## Story

The CSF rendered inside the `Canvas` from which you can see the implementation example.

### Default

<Canvas>
	<Story
		name='Default'
		args={{
			code: JSON.stringify(
				{
  "id": "/subscriptions/16e34237-c919-4baa-898a-1b7f1d54e525/resourceGroups/networklogs/providers/Microsoft.Web/sites/wapdel0123",
  "kind": "app,linux",
  "name": "wapdel0123",
  "tags": {},
  "type": "Microsoft.Web/sites",
  "state": "Running",
  "hyperV": false,
  "enabled": true,
  "isXenon": false,
  "identity": null,
  "location": "East US",
  "reserved": true,
  "hostNames": [
    "wapdel0123.azurewebsites.net"
  ],
  "httpsOnly": false,
  "siteConfig": {
    "cors": null,
    "push": null,
    "limits": null,
    "scmType": null,
    "alwaysOn": false,
    "metadata": null,
    "sitePort": null,
    "vnetName": null,
    "ftpsState": null,
    "machineKey": null,
    "phpVersion": null,
    "appSettings": null,
    "experiments": null,
    "javaVersion": null,
    "nodeVersion": null,
    "storageType": null,
    "documentRoot": null,
    "routingRules": null,
    "apiDefinition": null,
    "autoHealRules": null,
    "http20Enabled": true,
    "javaContainer": null,
    "loadBalancing": null,
    "minTlsVersion": null,
    "pythonVersion": null,
    "runtimeADUser": null,
    "appCommandLine": null,
    "linuxFxVersion": "PYTHON|3.10",
    "tracingOptions": null,
    "autoHealEnabled": null,
    "handlerMappings": null,
    "healthCheckPath": null,
    "http20ProxyFlag": null,
    "numberOfWorkers": 1,
    "websiteTimeZone": null,
    "autoSwapSlotName": null,
    "defaultDocuments": null,
    "scmMinTlsVersion": null,
    "windowsFxVersion": null,
    "connectionStrings": null,
    "localMySqlEnabled": null,
    "minTlsCipherSuite": null,
    "powerShellVersion": null,
    "webSocketsEnabled": null,
    "winAuthAdminState": null,
    "httpLoggingEnabled": null,
    "publishingPassword": null,
    "publishingUsername": null,
    "winAuthTenantState": null,
    "apiManagementConfig": null,
    "managedPipelineMode": null,
    "netFrameworkVersion": null,
    "publicNetworkAccess": null,
    "virtualApplications": null,
    "vnetRouteAllEnabled": null,
    "antivirusScanEnabled": null,
    "azureStorageAccounts": null,
    "javaContainerVersion": null,
    "functionAppScaleLimit": 0,
    "requestTracingEnabled": null,
    "runtimeADUserPassword": null,
    "use32BitWorkerProcess": null,
    "vnetPrivatePortsCount": null,
    "fileChangeAuditEnabled": null,
    "ipSecurityRestrictions": null,
    "logsDirectorySizeLimit": null,
    "preWarmedInstanceCount": null,
    "remoteDebuggingEnabled": null,
    "remoteDebuggingVersion": null,
    "elasticWebAppScaleLimit": null,
    "windowsConfiguredStacks": null,
    "acrUserManagedIdentityId": null,
    "managedServiceIdentityId": null,
    "supportedTlsCipherSuites": null,
    "azureMonitorLogCategories": null,
    "keyVaultReferenceIdentity": null,
    "scmIpSecurityRestrictions": null,
    "xManagedServiceIdentityId": null,
    "acrUseManagedIdentityCreds": false,
    "sitePrivateLinkHostEnabled": null,
    "detailedErrorLoggingEnabled": null,
    "minimumElasticInstanceCount": 0,
    "requestTracingExpirationTime": null,
    "customAppPoolIdentityAdminState": null,
    "customAppPoolIdentityTenantState": null,
    "scmIpSecurityRestrictionsUseMain": null,
    "ipSecurityRestrictionsDefaultAction": null,
    "functionsRuntimeScaleMonitoringEnabled": null,
    "scmIpSecurityRestrictionsDefaultAction": null
  },
  "usageState": "Normal",
  "cloningInfo": null,
  "containerSize": 0,
  "resourceGroup": "networklogs",
  "suspendedTill": null,
  "clientCertMode": "Required",
  "redundancyMode": "None",
  "slotSwapStatus": null,
  "targetSwapSlot": null,
  "defaultHostName": "wapdel0123.azurewebsites.net",
  "appServicePlanId": "/subscriptions/16e34237-c919-4baa-898a-1b7f1d54e525/resourceGroups/networklogs/providers/Microsoft.Web/serverfarms/ASP-networklogs-a0e6",
  "enabledHostNames": [
    "wapdel0123.azurewebsites.net",
    "wapdel0123.scm.azurewebsites.net"
  ],
  "extendedLocation": null,
  "availabilityState": "Normal",
  "clientCertEnabled": false,
  "hostNameSslStates": [
    {
      "name": "wapdel0123.azurewebsites.net",
      "hostType": "Standard",
      "sslState": "Disabled",
      "toUpdate": null,
      "virtualIp": null,
      "thumbprint": null,
      "virtualIPv6": null,
      "ipBasedSslState": "NotConfigured",
      "ipBasedSslResult": null,
      "toUpdateIpBasedSsl": null,
      "certificateResourceId": null
    },
    {
      "name": "wapdel0123.scm.azurewebsites.net",
      "hostType": "Repository",
      "sslState": "Disabled",
      "toUpdate": null,
      "virtualIp": null,
      "thumbprint": null,
      "virtualIPv6": null,
      "ipBasedSslState": "NotConfigured",
      "ipBasedSslResult": null,
      "toUpdateIpBasedSsl": null,
      "certificateResourceId": null
    }
  ],
  "hostNamesDisabled": false,
  "isDefaultContainer": null,
  "maxNumberOfWorkers": null,
  "repositorySiteName": "wapdel0123",
  "scmSiteAlsoStopped": false,
  "lastModifiedTimeUtc": "2023-11-07T00:51:09.406666",
  "outboundIpAddresses": "52.151.220.65,52.151.220.76,52.151.220.92,52.151.220.113,52.151.220.203,52.151.220.211,20.119.16.24",
  "publicNetworkAccess": "Disabled",
  "vnetRouteAllEnabled": false,
  "dailyMemoryTimeQuota": 0,
  "vnetImagePullEnabled": false,
  "clientAffinityEnabled": false,
  "inProgressOperationId": null,
  "storageAccountRequired": false,
  "virtualNetworkSubnetId": null,
  "trafficManagerHostNames": null,
  "vnetContentShareEnabled": false,
  "clientCertExclusionPaths": null,
  "hostingEnvironmentProfile": null,
  "keyVaultReferenceIdentity": "SystemAssigned",
  "customDomainVerificationId": "19D462797B05ACC6BB0CF66DE65E684928B14C078AF411FA76095A321039B03D",
  "possibleOutboundIpAddresses": "52.151.220.65,52.151.220.76,52.151.220.92,52.151.220.113,52.151.220.203,52.151.220.211,52.151.221.61,52.151.221.107,52.151.221.137,52.151.221.182,52.151.221.201,52.151.221.227,52.151.221.228,52.151.221.247,52.151.222.80,52.151.222.84,52.151.222.148,52.151.222.203,52.151.222.214,52.151.222.216,52.151.223.28,52.151.223.64,52.151.223.71,52.151.223.138,20.119.16.24"
},
				null,
				4
			),
			language: 'json',
			copy: true,
			theme: 'dark',
			showLineNumbers: true,
			onClick: (e, d) => {
				console.log(d(e));
			},
		}}>
		{Template.bind({})}
	</Story>
</Canvas>

## Try in the Code Editor

This embeded `CodeSandBox` is external third party code editor `iframe` shared publicly. It is advised to create an account with banyancloud mail id to create/fork this sandbox.

<iframe
	src='https://codesandbox.io/embed/modest-dawn-gdm72w?fontsize=14&hidenavigation=1&theme=dark'
	style={{ width: '100%', height: 500 }}
	allow='accelerometer; ambient-light-sensor; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking'
	sandbox='allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts'></iframe>

## API

**`code`**

The code block that has to be presented or displayed.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>REQUIRED</th>
	</tr>
	<tr>
		<td>String</td>
		<td>YES</td>
	</tr>
</table>

```jsx
<CodeSnippet code='<h1>Hello World!</h1>' />
```

**`language`**

The programming, query or markup language to which the `code` belongs to.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>REQUIRED</th>
	</tr>
	<tr>
		<td>String</td>
		<td>YES</td>
	</tr>
</table>

```jsx
<CodeSnippet langauge='html' />
```

**`copy`**

An optional Key to enable the copy icon in the snippet container to copy the code to clipboard.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>Boolean</td>
		<td>false</td>
	</tr>
</table>

```jsx
<CodeSnippet copy />
```

**`theme`**

The color theme of the container to select between `light` or `dark` mode.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>String</td>
		<td>"dark"</td>
	</tr>
</table>

```jsx
<CodeSnippet theme='light' />
```

**`showLineNumbers`**

An optional key to display the line numbers of the code in the left side of the snippet holder.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>Boolean</td>
		<td>false</td>
	</tr>
</table>

```jsx
<CodeSnippet showLineNumbers={false} />
```

**`className`**

The custom style module class to be passed to the container of the snippet.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>String</td>
		<td>''</td>
	</tr>
</table>

```jsx
<CodeSnippet className={styles.code} />
```
