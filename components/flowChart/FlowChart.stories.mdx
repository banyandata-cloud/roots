import { Meta, Canvas, Story } from '@storybook/addon-docs';

import { ThemedContainer } from '../helpers';
import FlowChart from './FlowChart';

<Meta title='Components/FlowChart' parameters={{ options: { showToolbar: true } }} />

export const Template = (args) => (
	<ThemedContainer theme='light'>
		<FlowChart {...args} />
	</ThemedContainer>
);

# FlowChart

A flowchart component that visualizes the data in the form of Chart.

#### Design - [Figma](https://www.figma.com) | Code - [Github](https://github.com/banyandata-cloud/roots/tree/main/components/FlowChart)

> The FlowChart component provides an easy and customizable way to incorporate flowcharts into your application.By fetching data from API and retrieving that data to display in the chart.

## Usage

Basic import and additional information on how to use this component.

```js
import { FlowChart } from '@banyan_cloud/roots';
```

-   The apiUrl is the basic prop that let you to fetch the data.
-   The other props are used to personalise the node, linkages and fonts in the graph.

## Stories

The CSF rendered inside the `Canvas` from which you can see the implementation example.

### Default

The default FlowChart.

<Canvas>
	<Story
		name='Default'
		args={{
			data: {
				nodes: [
    {
      properties: {
        id: "node1",
        name: "Node 1",
        timestamp: "2024-07-29T12:00:00Z",
        status: "PASS",
        tag: "NO"
      },
      labels: ["Label1"]
    },
    {
      properties: {
        id: "node2",
        name: "Node 2",
        timestamp: "2024-07-29T12:10:00Z",
        status: "FAIL",
        tag: "YES"
      },
      labels: ["Label2"]
    },
    {
      properties: {
        id: "node3",
        name: "Node 3",
        timestamp: "2024-07-29T12:20:00Z",
        status: "PASS",
        tag: "NO"
      },
      labels: ["Label1"]
    }
  ],
  relationships: [
    {
      start_node: {
        properties: {
          id: "node1",
          name: "Node 1"
        }
      },
      end_node: {
        properties: {
          id: "node2",
          name: "Node 2"
        }
      },
      type: "REL_TYPE_1"
    },
    {
      start_node: {
        properties: {
          id: "node2",
          name: "Node 2"
        }
      },
      end_node: {
        properties: {
          id: "node3",
          name: "Node 3"
        }
      },
      type: "REL_TYPE_2"
    }
  ],
    },
			showLegend: true,
			width: 900,
			height: 600,
			hideLinkText: true,
			rightLegendAdjY: 50,
		}}>
		{Template.bind({})}
	</Story>
</Canvas>

## Try in the Code Editor

This embeded `CodeSandBox` is external third party code editor `iframe` shared publicly. It is advised to create an account with banyancloud mail id to create/fork this sandbox.

## API

**`apiUrl`**

The actual base URL of the API from which you want to fetch data.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>string</td>
		<td>null</td>
	</tr>
</table>

```jsx
<FlowChart apiUrl='API_url' />
```

**`width`**

Width allow you to manually adjust the width of the Graph screen.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>number</td>
		<td>950</td>
	</tr>
</table>

```jsx
<FlowChart width='950' />
```

**`height`**

Height allow you to manually adjust the height of the Graph screen.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>number</td>
		<td>600</td>
	</tr>
</table>

```jsx
<FlowChart height='600' />
```

**`linkDistance`**

linkDistance adjust the distance of the link connected between the nodes.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>number</td>
		<td>100</td>
	</tr>
</table>

```jsx
<FlowChart linkDistance='150' />
```

**`linkFontSize`**

linkFontSize adjust the font size of relation label displayed on link connected between the nodes.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>string</td>
		<td>8px</td>
	</tr>
</table>

```jsx
<FlowChart linkFontSize='8px' />
```

**`labelFontSize`**

labelFontSize adjust the size of label displayed on the nodes.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>string</td>
		<td>8px</td>
	</tr>
</table>

```jsx
<FlowChart labelFontSize='8px' />
```

**`nodeRadius`**

nodeRadius is radius of node.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>number</td>
		<td>13</td>
	</tr>
</table>

```jsx
<FlowChart nodeRadius='13' />
```

**`labelColor`**

labelColor to modify the color of label displayed on the nodes.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>string</td>
		<td>white</td>
	</tr>
</table>

```jsx
<FlowChart labelColor='white' />
```

**`linkTextColor`**

linkTextColor to modify the color of relation label displayed on the link.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>string</td>
		<td>black</td>
	</tr>
</table>

```jsx
<FlowChart linkTextColor='black' />
```

**`hideLinkText`**

hideLinkText will hide the text on the link beetween the nodes.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>bool</td>
		<td>false</td>
	</tr>
</table>

```jsx
<FlowChart hideLinkText= true />
```
**`showLegend`**

showLegend will enable the legend at the top left.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>bool</td>
		<td>false</td>
	</tr>
</table>

```jsx
<FlowChart showLegend= true />
```