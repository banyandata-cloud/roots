import { Meta, Canvas, Story } from '@storybook/addon-docs';

import { ThemedContainer } from '../../helpers';
import HeatMapChart from './HeatMapChart';

import { sampleData } from './HeatMapChartData.js';

<Meta title='Components/HeatMapChart' parameters={{ options: { showToolbar: false } }} />

export const Template = (args) => (
	<ThemedContainer
		{...args}
		style={{
			height: '400px',
		}}>
		<HeatMapChart {...args} />
	</ThemedContainer>
);

# Heat Map Chart

A Visual Representation of Cardinality that is visible to intensity of a color shade based on amount of value present.

#### Design - [Figma](https://www.figma.com/file/Cx1dHCv47N2i35IP8wNz1u/Charts?type=design&node-id=412-37499&mode=design&t=ZtOwdHlsq1S664aU-0) | Code - [Github](https://github.com/banyandata-cloud/roots/tree/main/components/charts/heatMapChart)

> This components uses the `echarts` utility library to use the Basic Visual Components and properties to customise the same for required use case and `EChartsReactCore` utility library to Wrap the Charts for React Projects.

## Usage

Basic import and additional information on how to use this component.

```js
import { HeatMapChart } from '@banyan_cloud/roots';
```

-   The Heat Map Chart is just like any other chart with standard `chartData` and `metaData` values alongwith props to control customization.
-   The `className` of the Chart can be adjusted in the implementaion code to match its flexibility with respect to its container.
-   The Heat Map Grid is 7 \* 8 by default and also minimum. The Grid is designed to auto adjust based on Data.

## Stories

The CSF rendered inside the `Canvas` from which you can see the implementation example.

### Default Heat Map Chart

<Canvas>
	<Story
		name='Default'
		args={{
			gridContainLabel: true,
			gridOptions: {
				left: 0,
				right: 0,
				bottom: 0,
				top: 15,
			},
			xAxisLabel: {
				show: false,
			},
			xSplitLineShow: false,
			xAxisLineShow: false,
			xAxisTickShow: false,
			yAxisLabelShow: false,
			ySplitLineShow: false,
			yAxisLineShow: false,
			yAxisTickShow: false,
			axisColor: 'grey',
			tooltip: {
				trigger: 'item',
				formatter: (param) => {
					return `${param.name}: ${
						sampleData.metaData.seriesData[param.name].total
					} Permissions`;
				},
			},
			seriesData: sampleData,
			visualMap: {
				min: 0,
				max: 10,
				show: false,
				calculable: true,
				inRange: {
					color: [
						'#313695',
						'#74add1',
						'#abd9e9',
						'#e0f3f8',
						'#ffffbf',
						'#fee090',
						'#fdae61',
						'#f46d43',
						'#d73027',
						'#a50026',
					],
				},
			},
			seriesOption: {
				label: {
					show: false,
				},
				itemStyle: {
					borderWidth: 1,
				},
			},
		}}>
		{Template.bind({})}
	</Story>
</Canvas>

### Loading State of Heat Map Chart

<Canvas>
	<Story
		name='Loading State'
		args={{
			gridContainLabel: true,
			gridOptions: {
				left: 0,
				right: 0,
				bottom: 0,
				top: 15,
			},
			xAxisLabel: {
				show: false,
			},
			xSplitLineShow: false,
			xAxisLineShow: false,
			xAxisTickShow: false,
			yAxisLabelShow: false,
			ySplitLineShow: false,
			yAxisLineShow: false,
			yAxisTickShow: false,
			loading: true,
			axisColor: 'grey',
			tooltip: {
				trigger: 'item',
				formatter: (param) => {
					return `${param.name}: ${
						sampleData.metaData.seriesData[param.name].total
					} Permissions`;
				},
			},
			seriesData: sampleData,
			visualMap: {
				min: 0,
				max: 10,
				show: false,
				calculable: true,
				inRange: {
					color: [
						'#313695',
						'#74add1',
						'#abd9e9',
						'#e0f3f8',
						'#ffffbf',
						'#fee090',
						'#fdae61',
						'#f46d43',
						'#d73027',
						'#a50026',
					],
				},
			},
			seriesOption: {
				label: {
					show: false,
				},
				itemStyle: {
					borderWidth: 1,
				},
			},
		}}>
		{Template.bind({})}
	</Story>
</Canvas>

## Try in the Code Editor

This embeded `CodeSandBox` is external third party code editor `iframe` shared publicly. It is advised to create an account with banyancloud mail id to create/fork this sandbox.

<iframe
	src='https://codesandbox.io/s/elegant-bush-x4nhtm?file=/src/App.js'
	style={{ width: '100%', height: 500 }}
	title='xenodochial-moon-5y668f'
	allow='accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking'
	sandbox='allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts'></iframe>

## API

**`loading`**

loading indicates the waiting state of chart while data is loading

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>bool</td>
		<td>false</td>
	</tr>
</table>

```jsx
<HeatMapChart loading={false} />
```

**`fallback`**

The fallback indicates whether to show Skeleton component or not in case of Exception

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>bool</td>
		<td>false</td>
	</tr>
</table>

```jsx
<HeatMapChart fallback={false} />
```

**`title`**

An optional Key to give a title to the Chart.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>String</td>
		<td>''</td>
	</tr>
</table>

```jsx
<HeatMapChart title='Title' />
```

**`gridOptions`**

Object that set Chart Layout Dimensions from Left, Right, Top and Bottom.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>object</td>
		<td>
			{JSON.stringify({
				left: 0,
				right: 0,
				bottom: 0,
				top: 0,
			})}
		</td>
	</tr>
</table>

```jsx
<HeatMapChart
	gridOptions={{
		left: 50,
		right: 50,
		bottom: 50,
		top: 100,
	}}
/>
```

**`gridContainLabel`**

An optional key to resize the Chart Layout in order to include 'Title' in display.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>Boolean</td>
		<td>false</td>
	</tr>
</table>

```jsx
<HeatMapChart gridContainLabel={false} />
```

**`tooltip`**

Tooltip key can be used to format and display Data in Tooltip for Charts, it can be triggered through several events as input by dev.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>object</td>
		<td>{}</td>
	</tr>
</table>

```jsx
<HeatMapChart
	tooltip={{
		show: true,
		trigger: 'item',
		axisPointer: {
			type: 'cross',
			label: {
				backgroundColor: '#6a7985',
			},
		},
		triggerOn: 'mousemove',
	}}
/>
```

**`seriesData`**

The Actual Data which will be displayed in the Chart. It must have 2 keys - 'chartData' and 'metaData'.
The chartData can have any number of keys representing Data in object against `x1` key for cardinality.
The metaData can have any other required Data.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>REQUIRED</th>
	</tr>
	<tr>
		<td>Object</td>
		<td>{}</td>
	</tr>
</table>

```jsx
<HeatMapChart
	seriesData={{
		user1: {
			x1: 4,
		},
	}}
/>
```

**`yAxisLabelShow`**

Key to decide whether to show or hide Y-Axis Label

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>bool</td>
		<td>false</td>
	</tr>
</table>

```jsx
<HeatMapChart yAxisLabelShow={false} />
```

**`xSplitLineShow`**

Key to decide whether to show or hide X-Axis Split Line.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>bool</td>
		<td>false</td>
	</tr>
</table>

```jsx
<HeatMapChart xSplitLineShow={false} />
```

**`xAxisLineShow`**

Key to decide whether to show or hide X-Axis Division Line

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>bool</td>
		<td>false</td>
	</tr>
</table>

```jsx
<HeatMapChart xAxisLineShow={false} />
```

**`xAxisTickShow`**

Key to decide whether to show or hide X-Axis Tick

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>bool</td>
		<td>false</td>
	</tr>
</table>

```jsx
<HeatMapChart xAxisTickShow={false} />
```

**`ySplitLineShow`**

Key to decide whether to show or hide Y-Axis Split Line

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>bool</td>
		<td>false</td>
	</tr>
</table>

```jsx
<HeatMapChart ySplitLineShow={false} />
```

**`yAxisLineShow`**

Key to decide whether to show or hide Y-Axis Line

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>bool</td>
		<td>false</td>
	</tr>
</table>

```jsx
<HeatMapChart yAxisLineShow={false} />
```

**`yAxisTickShow`**

Key to decide whether to show or hide Y-Axis Tick

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>bool</td>
		<td>false</td>
	</tr>
</table>

```jsx
<HeatMapChart yAxisTickShow={false} />
```

**`axisColor`**

key to specify 'color' of Axis.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>String</td>
		<td>''</td>
	</tr>
</table>

```jsx
<HeatMapChart axisColor='red' />
```

**`onEvents`**

Callback to control 'Click' event on HeatMap

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>Function</td>
		<td>() => {}</td>
	</tr>
</table>

```jsx
<HeatMapChart
	onEvents={{
		click: functionName,
	}}
/>
```

**`seriesName`**

Optional key to specify any name to the HeatMap series.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>String</td>
		<td>''</td>
	</tr>
</table>

```jsx
<HeatMapChart seriesName='Permission Count' />
```

**`defaultColor`**

Key to specify default 'color' of Map Tiles.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>String</td>
		<td>''</td>
	</tr>
</table>

```jsx
<HeatMapChart defaultColor='red' />
```

**`visualMap`**

Visual Map is the Mandatory configuration for the HeatMap to work properly.
The Mandatory values are `min` and `max` that allows the Map to decide range of values and thus, assign a color to each tile accordingly.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>REQUIRED</th>
	</tr>
	<tr>
		<td>Object</td>
		<td>{}</td>
	</tr>
</table>

```jsx
<HeatMapChart
	visualMap={{
		min: 0,
		max: 10,
		show: false,
		calculable: true,
		inRange: {
			color: [
				'#313695',
				'#74add1',
				'#abd9e9',
				'#e0f3f8',
				'#ffffbf',
				'#fee090',
				'#fdae61',
				'#f46d43',
				'#d73027',
				'#a50026',
			],
		},
	}}
/>
```

**`seriesOption`**

This key contains an Object allowing customization of Heat Map components.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>REQUIRED</th>
	</tr>
	<tr>
		<td>Object</td>
		<td>
			{JSON.stringify({
				label: {
					show: true,
				},
			})}
		</td>
	</tr>
</table>

```jsx
<HeatMapChart seriesOption={
		label: {
			show: false,
		},
		itemStyle: {
			borderWidth: 1,
		},
	} />
```

**`style`**

Key to change styles thorugh standard CSS values.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>object</td>
		<td>
			{JSON.stringify({
				width: '100%',
				height: '100%',
			})}
		</td>
	</tr>
</table>

```jsx
<HeatMapChart style={{ width: '90%' }} />
```

**`className`**

Key to change style through external className.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>String</td>
		<td>''</td>
	</tr>
</table>

```jsx
<HeatMapChart className='chart-area' />
```

**`theme`**

The color theme of the container to select between `light` or `dark` mode.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>String</td>
		<td>"dark"</td>
	</tr>
</table>

```jsx
<HeatMapChart theme='light' />
```
