import { Meta, Canvas, Story } from '@storybook/addon-docs';

import { TableColumn } from '../BaseTable.class';
import BaseTable from './BaseTable';
import { TableCell } from '../cell';
import { Button } from '../../buttons';

<Meta title='Components/Table/BaseTable' parameters={{ options: { showToolbar: false } }} />

export const Template = (args) => <BaseTable {...args} />;

# Base Table

Visual Representation of Data in Tabular format alongwith Associated components in Table like Header and Pagination.

#### Design - [Figma](https://www.figma.com/file/e9opoAtQHBo4vFd6u0Co98/Component-Library?type=design&node-id=1-5&mode=design&t=tXbQWENNIzmFNTVU-0) | Code - [Github](https://github.com/banyandata-cloud/roots/tree/main/components/table)

> This components uses combination of all Table Elements i.e Cell, Header, Coloum and Row.

## Usage

Basic import and additional information on how to use this component.

```js
import { BaseTable } from '@banyan_cloud/roots';
```

-   The Table component accept 2 major keys `data` and `header` values alongwith props to control customization.
-   The `className` of the Table can be adjusted in the implementaion code to match its flexibility with respect to its container.

## Stories

The CSF rendered inside the `Canvas` from which you can see the implementation example.

### Default

<Canvas>
	<Story
		name='Default'
		args={{
			headerData: [
				new TableColumn({
					title: 'Name',
					id: 'name',
					size: 'lg',
					flexible: true,
				}),
				new TableColumn({
					title: 'Gender',
					id: 'gender',
					size: 'sm',
				}),
				new TableColumn({
					title: 'Age',
					id: 'age',
					size: 'sm',
				}),
				new TableColumn({
					title: 'Designation',
					id: 'designation',
					fallbackValue: 'NA'
				}),
				new TableColumn({
					title: 'State',
					id: 'state',
					size: 'sm',
				}),
			],
			tableData: [
				{
					name: 'Aryan Dixit',
					gender: 'M',
					age: 27,
					designation: 'UI Engineer',
					state: 'Uttar Pradesh',
				},
				{
					name: 'Jaidev Singh Bhui',
					gender: 'M',
					age: 23,
					designation: null,
					state: 'Delhi',
				},
				...[...Array(30).keys()].map(() => {
					return {
						name: 'Pradeep Annadurai',
						gender: 'M',
						age: 24,
						designation: 'UI Engineer',
						state: 'Tamil Nadu',
					};
				}),
			],
		}}>
		{Template.bind({})}
	</Story>
</Canvas>

### Expandable

<Canvas>
	<Story
		name='Expandable'
		args={{
			headerData: [
				new TableColumn({
					title: 'Name',
					id: 'name',
					size: 'lg',
					flexible: true,
				}),
				new TableColumn({
					title: 'Gender',
					id: 'gender',
					size: 'sm',
				}),
				new TableColumn({
					title: 'Age',
					id: 'age',
					size: 'sm',
				}),
				new TableColumn({
					title: 'Designation',
					id: 'designation',
				}),
				new TableColumn({
					title: 'State',
					id: 'state',
					size: 'sm',
				}),
			],
			tableData: [
				{
					name: 'Aryan Dixit',
					gender: 'M',
					age: 27,
					designation: 'UI Engineer',
					state: 'Uttar Pradesh',
				},
				{
					name: 'Jaidev Singh Bhui',
					gender: 'M',
					age: 23,
					designation: 'UI Engineer',
					state: 'Delhi',
				},
				...[...Array(30).keys()].map(() => {
					return {
						name: 'Pradeep Annadurai',
						gender: 'M',
						age: 24,
						designation: 'UI Engineer',
						state: 'Tamil Nadu',
					};
				}),
			],
			expandable: () => {
				return (
					<BaseTable
						headerData={[
							new TableColumn({
								title: 'Name',
								id: 'name',
								size: 'lg',
								flexible: true,
							}),
							new TableColumn({
								title: 'Gender',
								id: 'gender',
								size: 'sm',
							}),
							new TableColumn({
								title: 'Age',
								id: 'age',
								size: 'sm',
							}),
							new TableColumn({
								title: 'Designation',
								id: 'designation',
							}),
							new TableColumn({
								title: 'State',
								id: 'state',
								size: 'sm',
							}),
						]}
						tableData={[
							{
								name: 'Aryan Dixit',
								gender: 'M',
								age: 27,
								designation: 'UI Engineer',
								state: 'Uttar Pradesh',
							},
							{
								name: 'Jaidev Singh Bhui',
								gender: 'M',
								age: 23,
								designation: 'UI Engineer',
								state: 'Delhi',
							},
							...[...Array(30).keys()].map(() => {
								return {
									name: 'Pradeep Annadurai',
									gender: 'M',
									age: 24,
									designation: 'UI Engineer',
									state: 'Tamil Nadu',
								};
							}),
						]}
					/>
				);
			},
			customCells: {
				body: () => {
					return {
						name: ({ datum, expandableProps, ...rest }) => {
							return (
								<TableCell
									{...rest}
									component3={
										!expandableProps.disabled && (
											<Button
												{...expandableProps}
												// eslint-disable-next-line no-underscore-dangle
												title={
													expandableProps._expanded
														? 'Collapse'
														: 'Expand'
												}
												size='auto'
											/>
										)
									}
								/>
							);
						},
					};
				},
			},
		}}>
		{Template.bind({})}
	</Story>
</Canvas>

### Conditional Expandable

<Canvas>
	<Story
		name='Conditional Expandable'
		args={{
			headerData: [
				new TableColumn({
					title: 'Name',
					id: 'name',
					size: 'lg',
					flexible: true,
				}),
				new TableColumn({
					title: 'Gender',
					id: 'gender',
					size: 'sm',
				}),
				new TableColumn({
					title: 'Age',
					id: 'age',
					size: 'sm',
				}),
				new TableColumn({
					title: 'Designation',
					id: 'designation',
				}),
				new TableColumn({
					title: 'State',
					id: 'state',
					size: 'sm',
				}),
			],
			tableData: [
				{
					name: 'Aryan Dixit',
					gender: 'M',
					age: 27,
					designation: 'UI Engineer',
					state: 'Uttar Pradesh',
				},
				{
					name: 'Jaidev Singh Bhui',
					gender: 'M',
					age: 23,
					designation: 'UI Engineer',
					state: 'Delhi',
				},
				...[...Array(30).keys()].map(() => {
					return {
						name: 'Pradeep Annadurai',
						gender: 'M',
						age: 24,
						designation: 'UI Engineer',
						state: 'Tamil Nadu',
					};
				}),
			],
			expandable: () => {
				return (
					<BaseTable
						headerData={[
							new TableColumn({
								title: 'Name',
								id: 'name',
								size: 'lg',
								flexible: true,
							}),
							new TableColumn({
								title: 'Gender',
								id: 'gender',
								size: 'sm',
							}),
							new TableColumn({
								title: 'Age',
								id: 'age',
								size: 'sm',
							}),
							new TableColumn({
								title: 'Designation',
								id: 'designation',
							}),
							new TableColumn({
								title: 'State',
								id: 'state',
								size: 'sm',
							}),
						]}
						tableData={[
							{
								name: 'Jaidev Singh Bhui',
								gender: 'M',
								age: 23,
								designation: 'UI Engineer',
								state: 'Delhi',
							},
							...[...Array(30).keys()].map(() => {
								return {
									name: 'Pradeep Annadurai',
									gender: 'M',
									age: 24,
									designation: 'UI Engineer',
									state: 'Tamil Nadu',
								};
							}),
						]}
					/>
				);
			},
			customCells: {
				body: () => {
					return {
						name: ({ datum, expandableProps, ...rest }) => {
							return (
								<TableCell
									{...rest}
									component3={
										!expandableProps.disabled && (
											<Button
												{...expandableProps}
												// eslint-disable-next-line no-underscore-dangle
												title={
													expandableProps._expanded
														? 'Collapse'
														: 'Expand'
												}
												size='auto'
											/>
										)
									}
								/>
							);
						},
					};
				},
			},
			expandable: ({ index }) => {
				if (index < 3) {
					return null;
				}
				return (
					<BaseTable
						headerData={[
							new TableColumn({
								title: 'Name',
								id: 'name',
								size: 'lg',
								flexible: true,
							}),
							new TableColumn({
								title: 'Gender',
								id: 'gender',
								size: 'sm',
							}),
							new TableColumn({
								title: 'Age',
								id: 'age',
								size: 'sm',
							}),
							new TableColumn({
								title: 'Designation',
								id: 'designation',
							}),
							new TableColumn({
								title: 'State',
								id: 'state',
								size: 'sm',
							}),
						]}
						tableData={[
							{
								name: 'Aryan Dixit',
								gender: 'M',
								age: 27,
								designation: 'UI Engineer',
								state: 'Uttar Pradesh',
							},
							{
								name: 'Jaidev Singh Bhui',
								gender: 'M',
								age: 23,
								designation: 'UI Engineer',
								state: 'Delhi',
							},
							...[...Array(30).keys()].map(() => {
								return {
									name: 'Pradeep Annadurai',
									gender: 'M',
									age: 24,
									designation: 'UI Engineer',
									state: 'Tamil Nadu',
								};
							}),
						]}
					/>
				);
			},
		}}>
		{Template.bind({})}
	</Story>
</Canvas>

## Try in the Code Editor

This embeded `CodeSandBox` is external third party code editor `iframe` shared publicly. It is advised to create an account with banyancloud mail id to create/fork this sandbox.

<iframe
	src='https://codesandbox.io/s/delicate-wood-vrqzpw?file=/src/App.js'
	style={{ width: '100%', height: 500 }}
	title='xenodochial-moon-5y668f'
	allow='accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking'
	sandbox='allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts'></iframe>

## API

**`loading`**

loading indicates the waiting state of chart while data is loading

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>bool</td>
		<td>false</td>
	</tr>
</table>

```jsx
<BaseTable loading={false} />
```

**`headerData`**

The key that holds details of all headers of the Table mapped to the Data with key.
It has following shape - `title`, `id`, `size`, `flexible`, `sort`, `style` and `multiline`.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>Array</td>
		<td>[]</td>
	</tr>
</table>

```jsx
<BaseTable
	headerData={[
		{
			title: 'Name',
			id: 'name',
			size: 'lg',
			flexible: true,
		},
		{
			title: 'Gender',
			id: 'gender',
			size: 'sm',
		},
		{
			title: 'Age',
			id: 'age',
			size: 'sm',
		},
		{
			title: 'Designation',
			id: 'designation',
		},
		{
			title: 'State',
			id: 'state',
			size: 'sm',
		},
	]}
/>
```

**`tableData`**

The Fundamental data which is displayed in Table and mapped againt header.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>Array</td>
		<td>[]</td>
	</tr>
</table>

```jsx
<BaseTable
	tableData={[
		{
			name: 'Aryan Dixit',
			gender: 'M',
			age: 27,
			designation: 'UI Engineer',
			state: 'UP',
		},
	]}
/>
```

**`customCells`**

Any additional UI or funcationlity that is required in either Header or Body except data Mapping.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>Object</td>
		<td>
			{`{
				header: null,
				body: null,
			}`}
		</td>
	</tr>
</table>

```jsx
<BaseTable
	customCells={{
		body: BodyCells({
			datum,
			selectedResources,
			setSelectedResources,
		}),
		header: HeaderCells({
			datum,
			selectedResources,
			setSelectedResources,
			resourcesList,
		}),
	}}
/>
```

**`expandable`**
A callback function to capture Expand event.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>Function</td>
		<td>() => {}</td>
	</tr>
</table>

```jsx
<BaseTable
	expandable={() => {
		// Reset some Data
	}}
/>
```

**`onSort`**

A callback function to capture Sort event.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>Function</td>
		<td>() => {}</td>
	</tr>
</table>

```jsx
<BaseTable
	onSort={() => {
		// Reset some Data
	}}
/>
```

**`onRowClick`**

A callback function to capture Row Click event.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>Function</td>
		<td>() => {}</td>
	</tr>
</table>

```jsx
<BaseTable
	onRowClick={() => {
		// Reset some Data
	}}
/>
```

**`className`**

Key to change style through external className.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>String</td>
		<td>''</td>
	</tr>
</table>

```jsx
<BaseTable className='chart-area' />
```

**`rowHeight`**

Key to decide height of Row to select between `md` or `lg` mode.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>String</td>
		<td>"md"</td>
	</tr>
</table>

```jsx
<BaseTable rowHeight='lg' />
```

**`theme`**

The color theme of the container to select between `light` or `dark` mode.

<table style={{ width: '100%' }}>
	<tr>
		<th style={{ textAlign: 'left', width: '50%' }}>TYPE</th>
		<th style={{ textAlign: 'left', width: '50%' }}>DEFAULT</th>
	</tr>
	<tr>
		<td>String</td>
		<td>"dark"</td>
	</tr>
</table>

```jsx
<BaseTable theme='light' />
```
